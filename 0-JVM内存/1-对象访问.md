#对象访问

![img](https://cdn.jsdelivr.net/gh/wp3355168/Typora-Picgo-Gitee/img/20210322123207.png)



## jvm层面引用(reference)

（1）强引用（Strong Reference）

（2）软引用（Soft Reference）

（3）弱引用（Weak Reference）

（4）、虚引用（Phantom Reference）



## 对象访问方式

主流的对象访问方式有两种：

### 使用句柄

Java堆划分一块内存作为句柄池，reference中存储就是对象的句柄地址；

​    对象句柄包含两个地址：

> ​    （1）、在堆中分配的对象实例数据的地址；
>
> ​    （2）、这个对象类型数据地址；  

![img](https://cdn.jsdelivr.net/gh/wp3355168/Typora-Picgo-Gitee/img/20210321193827.png)



​    优点：对象移动时（垃圾回收时常见的动作），reference不需要修改，只改变句柄中实例数据指针；        



### 使用直接指针

reference中存储就是在堆中分配的对象实例数据的地址；

​    而对象实例数据中需要有这个对象类型数据的相关信息（前面文章讨论了HotSpot使用对象头来存储对象类型数据地址）

![img](https://cdn.jsdelivr.net/gh/wp3355168/Typora-Picgo-Gitee/img/20210321193914.png)


